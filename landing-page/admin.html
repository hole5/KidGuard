<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Landing Page ç®¡ç†åå°</title>
  <style>
    :root {
      --bg: #0e1116;
      --card: #151a23;
      --primary: #3ec9a7;
      --primary-strong: #27c29a;
      --text: #e8edf5;
      --sub: #9aa5b5;
      --border: #1f2733;
      --muted: #0a0d12;
      --success: #3ec9a7;
      --warning: #f59e0b;
      --error: #ef4444;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Inter", "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    .container {
      display: flex;
      min-height: 100vh;
    }
    .sidebar {
      width: 280px;
      background: var(--card);
      border-right: 1px solid var(--border);
      padding: 24px;
      overflow-y: auto;
    }
    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 32px;
      padding-bottom: 24px;
      border-bottom: 1px solid var(--border);
    }
    .sidebar-header img {
      width: 40px;
      height: 40px;
      border-radius: 10px;
    }
    .sidebar-header h2 {
      font-size: 18px;
    }
    .nav-menu {
      list-style: none;
    }
    .nav-item {
      margin-bottom: 8px;
    }
    .nav-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      color: var(--sub);
      text-decoration: none;
      border-radius: 10px;
      transition: all 0.2s;
      font-size: 14px;
      cursor: pointer;
    }
    .nav-link:hover {
      background: rgba(255,255,255,0.05);
      color: var(--text);
    }
    .nav-link.active {
      background: linear-gradient(135deg, rgba(62,201,167,0.15), rgba(62,201,167,0.05));
      color: var(--primary);
      border: 1px solid rgba(62,201,167,0.3);
    }
    .main-content {
      flex: 1;
      padding: 32px;
      overflow-y: auto;
    }
    .page-header {
      margin-bottom: 32px;
    }
    .page-header h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }
    .page-header p {
      color: var(--sub);
      font-size: 14px;
    }
    .form-section {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 24px;
      margin-bottom: 24px;
    }
    .form-section-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: var(--text);
      font-size: 14px;
      font-weight: 500;
    }
    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 12px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 14px;
      font-family: inherit;
      transition: all 0.2s;
    }
    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary);
      background: rgba(255,255,255,0.08);
    }
    .form-group textarea {
      min-height: 100px;
      resize: vertical;
    }
    .form-group small {
      display: block;
      margin-top: 6px;
      color: var(--sub);
      font-size: 12px;
    }
    .btn {
      padding: 12px 24px;
      border-radius: 10px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-strong) 100%);
      color: #0c1016;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(62,201,167,0.28);
    }
    .btn-secondary {
      background: rgba(255,255,255,0.05);
      color: var(--text);
      border: 1px solid var(--border);
    }
    .btn-secondary:hover {
      background: rgba(255,255,255,0.1);
    }
    .btn-group {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }
    .alert {
      padding: 12px 16px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 14px;
    }
    .alert-success {
      background: rgba(62,201,167,0.15);
      color: var(--success);
      border: 1px solid rgba(62,201,167,0.3);
    }
    .alert-error {
      background: rgba(239,68,68,0.15);
      color: var(--error);
      border: 1px solid rgba(239,68,68,0.3);
    }
    .preview-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-strong));
      color: #0c1016;
      border: none;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 12px 30px rgba(62,201,167,0.28);
      transition: all 0.2s;
    }
    .preview-btn:hover {
      transform: scale(1.1);
    }
    .page-content {
      display: none;
    }
    .page-content.active {
      display: block;
    }
    .lang-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    .lang-tab {
      padding: 8px 16px;
      background: transparent;
      border: none;
      color: var(--sub);
      cursor: pointer;
      font-size: 14px;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }
    .lang-tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }
    .lang-content {
      display: none;
    }
    .lang-content.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <img src="./image-jyue18oAlt6vKmINRNSUo.png" alt="Logo">
        <h2>Landing Page<br/>ç®¡ç†åå°</h2>
      </div>
      <nav>
        <ul class="nav-menu">
          <li class="nav-item">
            <a class="nav-link active" data-page="home">ğŸ  ä¸»é¡µå†…å®¹</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="video">ğŸ¥ è§†é¢‘è®¾ç½®</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="downloads">ğŸ“¥ ä¸‹è½½é“¾æ¥</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="pricing">ğŸ’° å®šä»·ä¿¡æ¯</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="agreements">ğŸ“„ åè®®å†…å®¹</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="translations">ğŸŒ å¤šè¯­è¨€</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-page="theme">ğŸ¨ ä¸»é¢˜è®¾ç½®</a>
          </li>
        </ul>
      </nav>
    </aside>

    <main class="main-content">
      <!-- ä¸»é¡µå†…å®¹ -->
      <div id="home-page" class="page-content active">
        <div class="page-header">
          <h1>ä¸»é¡µå†…å®¹ç®¡ç†</h1>
          <p>ç¼–è¾‘ä¸»é¡µçš„æ ‡é¢˜ã€æè¿°ã€ç‰¹æ€§ç­‰å†…å®¹</p>
        </div>

        <div id="home-alert"></div>

        <div class="form-section">
          <div class="form-section-title">Hero åŒºåŸŸ</div>
          <div class="form-group">
            <label>æ ‡ç­¾è¯­</label>
            <input type="text" id="hero-tagline" placeholder="å®ˆæŠ¤å­©å­ï¼Œä¹Ÿå®ˆæŠ¤å®‰å¿ƒ">
          </div>
          <div class="form-group">
            <label>ä¸»æ ‡é¢˜</label>
            <textarea id="hero-title" placeholder="ä»¥åŒç«¯ååŒ + å®‰å…¨åç«¯ï¼Œæ‰“é€ å¯ä¿¡çš„å„¿ç«¥æ‰‹æœºç®¡ç†ä½“éªŒ"></textarea>
          </div>
          <div class="form-group">
            <label>æè¿°</label>
            <textarea id="hero-desc" placeholder="å®¶é•¿ç«¯å†³ç­–ã€å„¿ç«¥ç«¯æ‰§è¡Œï¼Œé…åˆå¤šé‡é˜²æŠ¤å’Œç²¾ç»†åŒ–ç­–ç•¥ï¼Œå®æ—¶å®ˆæŠ¤å­©å­çš„æ•°å­—ä¸–ç•Œã€‚"></textarea>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">ç‰¹æ€§æ ‡ç­¾</div>
          <div class="form-group">
            <label>æ ‡ç­¾ 1</label>
            <input type="text" id="chip-1" placeholder="19ä¸ª REST API Â· é«˜å¯ç”¨">
          </div>
          <div class="form-group">
            <label>æ ‡ç­¾ 2</label>
            <input type="text" id="chip-2" placeholder="é˜²å¸è½½ä¿æŠ¤ Â· è®¾å¤‡ç®¡ç†å‘˜">
          </div>
          <div class="form-group">
            <label>æ ‡ç­¾ 3</label>
            <input type="text" id="chip-3" placeholder="å®æ—¶/å†å²è½¨è¿¹ Â· å®‰å…¨å›´æ ">
          </div>
          <div class="form-group">
            <label>æ ‡ç­¾ 4</label>
            <input type="text" id="chip-4" placeholder="åº”ç”¨é”å®š Â· å±å¹•æ—¶é—´">
          </div>
          <div class="form-group">
            <label>æ ‡ç­¾ 5</label>
            <input type="text" id="chip-5" placeholder="JWTåŒä»¤ç‰Œ Â· AESåŠ å¯†">
          </div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveHomeContent()">ä¿å­˜æ›´æ”¹</button>
          <button class="btn btn-secondary" onclick="loadHomeContent()">é‡ç½®</button>
        </div>
      </div>

      <!-- è§†é¢‘è®¾ç½® -->
      <div id="video-page" class="page-content">
        <div class="page-header">
          <h1>è§†é¢‘è®¾ç½®</h1>
          <p>é…ç½®ä¸»é¡µè§†é¢‘æ’­æ”¾é“¾æ¥å’Œå‚æ•°</p>
        </div>

        <div id="video-alert"></div>

        <div class="form-section">
          <div class="form-section-title">è§†é¢‘é…ç½®</div>
          <div class="form-group">
            <label>è§†é¢‘ URL</label>
            <input type="url" id="video-url" placeholder="https://example.com/video.mp4">
            <small>æ”¯æŒ MP4ã€WebM ç­‰æ ¼å¼</small>
          </div>
          <div class="form-group">
            <label>å°é¢å›¾ç‰‡ URL</label>
            <input type="url" id="video-poster" placeholder="https://example.com/poster.jpg">
            <small>è§†é¢‘åŠ è½½å‰çš„å°é¢å›¾</small>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="video-autoplay" checked> è‡ªåŠ¨æ’­æ”¾
            </label>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="video-muted" checked> é™éŸ³æ’­æ”¾
            </label>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="video-loop" checked> å¾ªç¯æ’­æ”¾
            </label>
          </div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveVideoSettings()">ä¿å­˜æ›´æ”¹</button>
          <button class="btn btn-secondary" onclick="loadVideoSettings()">é‡ç½®</button>
        </div>
      </div>

      <!-- ä¸‹è½½é“¾æ¥ -->
      <div id="downloads-page" class="page-content">
        <div class="page-header">
          <h1>ä¸‹è½½é“¾æ¥ç®¡ç†</h1>
          <p>é…ç½®å®¶é•¿ç«¯å’Œå„¿ç«¥ç«¯çš„ä¸‹è½½é“¾æ¥</p>
        </div>

        <div id="downloads-alert"></div>

        <div class="form-section">
          <div class="form-section-title">å®¶é•¿ç«¯ App</div>
          <div class="form-group">
            <label>APK ä¸‹è½½é“¾æ¥</label>
            <input type="url" id="parent-apk-url" placeholder="https://example.com/parent.apk">
          </div>
          <div class="form-group">
            <label>æ›´æ–°æ—¥å¿—é“¾æ¥</label>
            <input type="url" id="parent-changelog-url" placeholder="https://example.com/changelog">
          </div>
          <div class="form-group">
            <label>äºŒç»´ç å›¾ç‰‡ URL</label>
            <input type="url" id="parent-qr-url" placeholder="https://example.com/qr-parent.png">
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">å„¿ç«¥ç«¯ App</div>
          <div class="form-group">
            <label>APK ä¸‹è½½é“¾æ¥</label>
            <input type="url" id="child-apk-url" placeholder="https://example.com/child.apk">
          </div>
          <div class="form-group">
            <label>å®‰è£…æŒ‡å¼•é“¾æ¥</label>
            <input type="url" id="child-guide-url" placeholder="https://example.com/install-guide">
          </div>
          <div class="form-group">
            <label>äºŒç»´ç å›¾ç‰‡ URL</label>
            <input type="url" id="child-qr-url" placeholder="https://example.com/qr-child.png">
          </div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveDownloads()">ä¿å­˜æ›´æ”¹</button>
          <button class="btn btn-secondary" onclick="loadDownloads()">é‡ç½®</button>
        </div>
      </div>

      <!-- å®šä»·ä¿¡æ¯ -->
      <div id="pricing-page" class="page-content">
        <div class="page-header">
          <h1>å®šä»·ä¿¡æ¯ç®¡ç†</h1>
          <p>ç¼–è¾‘å®šä»·é¡µé¢çš„å†…å®¹</p>
        </div>

        <div id="pricing-alert"></div>

        <div class="form-section">
          <div class="form-section-title">ä¸ªäºº/å®¶åº­è®¢é˜…</div>
          <div class="form-group">
            <label>åŸºç¡€ç‰ˆä»·æ ¼</label>
            <input type="text" id="pricing-basic" placeholder="Â¥60/å¹´ï¼ˆâ‰ˆÂ¥5/æœˆï¼‰Â· 1å° Â· 5GB">
          </div>
          <div class="form-group">
            <label>æ ‡å‡†ç‰ˆä»·æ ¼</label>
            <input type="text" id="pricing-standard" placeholder="Â¥180/å¹´ï¼ˆâ‰ˆÂ¥15/æœˆï¼‰Â· 3å° Â· 20GB">
          </div>
          <div class="form-group">
            <label>é«˜çº§ç‰ˆä»·æ ¼</label>
            <input type="text" id="pricing-premium" placeholder="Â¥360/å¹´ï¼ˆâ‰ˆÂ¥30/æœˆï¼‰Â· 5å° Â· 50GB">
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">è®¾å¤‡æ‰©å±•åŒ…</div>
          <div class="form-group">
            <label>+1å°ä»·æ ¼</label>
            <input type="text" id="device-1" placeholder="Â¥72/å¹´ Â· é€‚åˆä¸´æ—¶æ–°å¢">
          </div>
          <div class="form-group">
            <label>+3å°ä»·æ ¼</label>
            <input type="text" id="device-3" placeholder="Â¥180/å¹´ Â· çœ17%">
          </div>
          <div class="form-group">
            <label>+5å°ä»·æ ¼</label>
            <input type="text" id="device-5" placeholder="Â¥264/å¹´ Â· çœ27%">
          </div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="savePricing()">ä¿å­˜æ›´æ”¹</button>
          <button class="btn btn-secondary" onclick="loadPricing()">é‡ç½®</button>
        </div>
      </div>

      <!-- åè®®å†…å®¹ -->
      <div id="agreements-page" class="page-content">
        <div class="page-header">
          <h1>åè®®å†…å®¹ç®¡ç†</h1>
          <p>ç¼–è¾‘ç”¨æˆ·åè®®ã€éšç§æ”¿ç­–ç­‰å†…å®¹</p>
        </div>

        <div id="agreements-alert"></div>

        <div class="form-section">
          <div class="form-section-title">ç”¨æˆ·åè®®</div>
          <div class="form-group">
            <label>åè®®æ ‡é¢˜</label>
            <input type="text" id="agreement-user-title" placeholder="ç”¨æˆ·åè®®">
          </div>
          <div class="form-group">
            <label>åè®®å†…å®¹</label>
            <textarea id="agreement-user-content" rows="10" placeholder="è¾“å…¥ç”¨æˆ·åè®®å†…å®¹..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">éšç§æ”¿ç­–</div>
          <div class="form-group">
            <label>æ”¿ç­–æ ‡é¢˜</label>
            <input type="text" id="agreement-privacy-title" placeholder="éšç§æ”¿ç­–">
          </div>
          <div class="form-group">
            <label>æ”¿ç­–å†…å®¹</label>
            <textarea id="agreement-privacy-content" rows="10" placeholder="è¾“å…¥éšç§æ”¿ç­–å†…å®¹..."></textarea>
          </div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveAgreements()">ä¿å­˜æ›´æ”¹</button>
          <button class="btn btn-secondary" onclick="loadAgreements()">é‡ç½®</button>
        </div>
      </div>

      <!-- å¤šè¯­è¨€ -->
      <div id="translations-page" class="page-content">
        <div class="page-header">
          <h1>å¤šè¯­è¨€ç®¡ç†</h1>
          <p>ç¼–è¾‘ä¸­è‹±æ–‡ç¿»è¯‘å†…å®¹</p>
        </div>

        <div id="translations-alert"></div>

        <div class="lang-tabs">
          <button class="lang-tab active" data-lang="zh-CN">ä¸­æ–‡</button>
          <button class="lang-tab" data-lang="en">English</button>
        </div>

        <div id="zh-CN-content" class="lang-content active">
          <div class="form-section">
            <div class="form-section-title">ä¸­æ–‡ç¿»è¯‘</div>
            <div class="form-group">
              <label>å¾½ç« æ–‡æœ¬</label>
              <input type="text" id="trans-zh-badge" placeholder="å…¨æ ˆä¸€ä½“ Â· å„¿ç«¥æ‰‹æœºç®¡ç†">
            </div>
            <div class="form-group">
              <label>é¢„çº¦æ¼”ç¤º</label>
              <input type="text" id="trans-zh-cta-demo" placeholder="é¢„çº¦æ¼”ç¤º">
            </div>
            <div class="form-group">
              <label>ä¸»é¡µæ ‡ç­¾</label>
              <input type="text" id="trans-zh-tab-home" placeholder="ä¸»é¡µ">
            </div>
            <div class="form-group">
              <label>å®šä»·æ ‡ç­¾</label>
              <input type="text" id="trans-zh-tab-pricing" placeholder="å®šä»·">
            </div>
          </div>
        </div>

        <div id="en-content" class="lang-content">
          <div class="form-section">
            <div class="form-section-title">English Translation</div>
            <div class="form-group">
              <label>Badge Text</label>
              <input type="text" id="trans-en-badge" placeholder="Full-stack Â· Parental control for kids">
            </div>
            <div class="form-group">
              <label>Book Demo</label>
              <input type="text" id="trans-en-cta-demo" placeholder="Book a demo">
            </div>
            <div class="form-group">
              <label>Home Tab</label>
              <input type="text" id="trans-en-tab-home" placeholder="Home">
            </div>
            <div class="form-group">
              <label>Pricing Tab</label>
              <input type="text" id="trans-en-tab-pricing" placeholder="Pricing">
            </div>
          </div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveTranslations()">ä¿å­˜æ›´æ”¹</button>
          <button class="btn btn-secondary" onclick="loadTranslations()">é‡ç½®</button>
        </div>
      </div>

      <!-- ä¸»é¢˜è®¾ç½® -->
      <div id="theme-page" class="page-content">
        <div class="page-header">
          <h1>ä¸»é¢˜è®¾ç½®</h1>
          <p>è‡ªå®šä¹‰ä¸»é¡µçš„é¢œè‰²ä¸»é¢˜</p>
        </div>

        <div id="theme-alert"></div>

        <div class="form-section">
          <div class="form-section-title">é¢œè‰²é…ç½®</div>
          <div class="form-group">
            <label>ä¸»è‰²è°ƒ</label>
            <input type="color" id="theme-primary" value="#3ec9a7">
          </div>
          <div class="form-group">
            <label>å¼ºè°ƒè‰²</label>
            <input type="color" id="theme-primary-strong" value="#27c29a">
          </div>
          <div class="form-group">
            <label>èƒŒæ™¯è‰²</label>
            <input type="color" id="theme-bg" value="#0e1116">
          </div>
          <div class="form-group">
            <label>å¡ç‰‡èƒŒæ™¯</label>
            <input type="color" id="theme-card" value="#151a23">
          </div>
          <div class="form-group">
            <label>æ–‡æœ¬é¢œè‰²</label>
            <input type="color" id="theme-text" value="#e8edf5">
          </div>
          <div class="form-group">
            <label>æ¬¡è¦æ–‡æœ¬</label>
            <input type="color" id="theme-sub" value="#9aa5b5">
          </div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveTheme()">ä¿å­˜æ›´æ”¹</button>
          <button class="btn btn-secondary" onclick="loadTheme()">é‡ç½®</button>
        </div>
      </div>
    </main>
  </div>

  <div style="position: fixed; bottom: 24px; right: 24px; display: flex; flex-direction: column; gap: 12px;">
    <button class="preview-btn" onclick="previewPage()" title="é¢„è§ˆä¸»é¡µ" style="position: relative; width: 60px; height: 60px;">ğŸ‘ï¸</button>
    <button class="preview-btn" onclick="exportConfig()" title="å¯¼å‡ºé…ç½®" style="position: relative; width: 60px; height: 60px; background: linear-gradient(135deg, #3b82f6, #2563eb);">ğŸ’¾</button>
    <button class="preview-btn" onclick="importConfig()" title="å¯¼å…¥é…ç½®" style="position: relative; width: 60px; height: 60px; background: linear-gradient(135deg, #8b5cf6, #7c3aed);">ğŸ“¥</button>
  </div>

  <script>
    // API åŸºç¡€è·¯å¾„
    const API_BASE = '/api/v1/landing-page';
    const STORAGE_KEY = 'landing_page_config';
    let authToken = localStorage.getItem('admin_token');
    
    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    if (!authToken) {
      // å¦‚æœæ²¡æœ‰ tokenï¼Œæç¤ºç”¨æˆ·ç™»å½•
      alert('è¯·å…ˆç™»å½•ç®¡ç†åå°è·å–è®¿é—®æƒé™');
      window.location.href = '/admin.html';
    }
    
    // ä»æœåŠ¡å™¨è¯»å–å½“å‰é…ç½®
    async function loadCurrentConfig() {
      try {
        const response = await fetch(`${API_BASE}/config`, {
          headers: {
            'Authorization': `Bearer ${authToken}`
          }
        });
        
        const result = await response.json();
        
        if (result.code === 200 && result.data) {
          return result.data;
        } else {
          throw new Error(result.message || 'è·å–é…ç½®å¤±è´¥');
        }
      } catch (error) {
        console.error('ä»æœåŠ¡å™¨åŠ è½½é…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:', error);
        // å¦‚æœ API å¤±è´¥ï¼Œå°è¯•ä» localStorage åŠ è½½
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          return JSON.parse(saved);
        }
        return getDefaultConfig();
      }
    }

    function getDefaultConfig() {
      return {
        home: {
          tagline: 'å®ˆæŠ¤å­©å­ï¼Œä¹Ÿå®ˆæŠ¤å®‰å¿ƒ',
          title: 'ä»¥åŒç«¯ååŒ + å®‰å…¨åç«¯ï¼Œæ‰“é€ å¯ä¿¡çš„å„¿ç«¥æ‰‹æœºç®¡ç†ä½“éªŒ',
          desc: 'å®¶é•¿ç«¯å†³ç­–ã€å„¿ç«¥ç«¯æ‰§è¡Œï¼Œé…åˆå¤šé‡é˜²æŠ¤å’Œç²¾ç»†åŒ–ç­–ç•¥ï¼Œå®æ—¶å®ˆæŠ¤å­©å­çš„æ•°å­—ä¸–ç•Œã€‚',
          chips: [
            '19ä¸ª REST API Â· é«˜å¯ç”¨',
            'é˜²å¸è½½ä¿æŠ¤ Â· è®¾å¤‡ç®¡ç†å‘˜',
            'å®æ—¶/å†å²è½¨è¿¹ Â· å®‰å…¨å›´æ ',
            'åº”ç”¨é”å®š Â· å±å¹•æ—¶é—´',
            'JWTåŒä»¤ç‰Œ Â· AESåŠ å¯†'
          ]
        },
        video: {
          url: 'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4',
          poster: './image-jyue18oAlt6vKmINRNSUo.png',
          autoplay: true,
          muted: true,
          loop: true
        },
        downloads: {
          parent: {
            apk: '',
            changelog: '',
            qr: ''
          },
          child: {
            apk: '',
            guide: '',
            qr: ''
          }
        },
        pricing: {
          basic: 'Â¥60/å¹´ï¼ˆâ‰ˆÂ¥5/æœˆï¼‰Â· 1å° Â· 5GB',
          standard: 'Â¥180/å¹´ï¼ˆâ‰ˆÂ¥15/æœˆï¼‰Â· 3å° Â· 20GB',
          premium: 'Â¥360/å¹´ï¼ˆâ‰ˆÂ¥30/æœˆï¼‰Â· 5å° Â· 50GB',
          device1: 'Â¥72/å¹´ Â· é€‚åˆä¸´æ—¶æ–°å¢',
          device3: 'Â¥180/å¹´ Â· çœ17%',
          device5: 'Â¥264/å¹´ Â· çœ27%'
        },
        agreements: {
          user: {
            title: 'ç”¨æˆ·åè®®',
            content: ''
          },
          privacy: {
            title: 'éšç§æ”¿ç­–',
            content: ''
          }
        },
        translations: {
          'zh-CN': {
            badge: 'å…¨æ ˆä¸€ä½“ Â· å„¿ç«¥æ‰‹æœºç®¡ç†',
            cta_demo: 'é¢„çº¦æ¼”ç¤º',
            tab_home: 'ä¸»é¡µ',
            tab_pricing: 'å®šä»·'
          },
          'en': {
            badge: 'Full-stack Â· Parental control for kids',
            cta_demo: 'Book a demo',
            tab_home: 'Home',
            tab_pricing: 'Pricing'
          }
        },
        theme: {
          primary: '#3ec9a7',
          primaryStrong: '#27c29a',
          bg: '#0e1116',
          card: '#151a23',
          text: '#e8edf5',
          sub: '#9aa5b5'
        }
      };
    }

    // åŠ è½½é…ç½®åˆ°è¡¨å•
    async function loadConfig() {
      const config = await loadCurrentConfig();
      
      // ä¸»é¡µå†…å®¹
      document.getElementById('hero-tagline').value = config.home.tagline;
      document.getElementById('hero-title').value = config.home.title;
      document.getElementById('hero-desc').value = config.home.desc;
      config.home.chips.forEach((chip, i) => {
        const el = document.getElementById(`chip-${i + 1}`);
        if (el) el.value = chip;
      });

      // è§†é¢‘è®¾ç½®
      document.getElementById('video-url').value = config.video.url;
      document.getElementById('video-poster').value = config.video.poster;
      document.getElementById('video-autoplay').checked = config.video.autoplay;
      document.getElementById('video-muted').checked = config.video.muted;
      document.getElementById('video-loop').checked = config.video.loop;

      // ä¸‹è½½é“¾æ¥
      document.getElementById('parent-apk-url').value = config.downloads.parent.apk;
      document.getElementById('parent-changelog-url').value = config.downloads.parent.changelog;
      document.getElementById('parent-qr-url').value = config.downloads.parent.qr;
      document.getElementById('child-apk-url').value = config.downloads.child.apk;
      document.getElementById('child-guide-url').value = config.downloads.child.guide;
      document.getElementById('child-qr-url').value = config.downloads.child.qr;

      // å®šä»·ä¿¡æ¯
      document.getElementById('pricing-basic').value = config.pricing.basic;
      document.getElementById('pricing-standard').value = config.pricing.standard;
      document.getElementById('pricing-premium').value = config.pricing.premium;
      document.getElementById('device-1').value = config.pricing.device1;
      document.getElementById('device-3').value = config.pricing.device3;
      document.getElementById('device-5').value = config.pricing.device5;

      // åè®®å†…å®¹
      document.getElementById('agreement-user-title').value = config.agreements.user.title;
      document.getElementById('agreement-user-content').value = config.agreements.user.content;
      document.getElementById('agreement-privacy-title').value = config.agreements.privacy.title;
      document.getElementById('agreement-privacy-content').value = config.agreements.privacy.content;

      // å¤šè¯­è¨€
      document.getElementById('trans-zh-badge').value = config.translations['zh-CN'].badge;
      document.getElementById('trans-zh-cta-demo').value = config.translations['zh-CN'].cta_demo;
      document.getElementById('trans-zh-tab-home').value = config.translations['zh-CN'].tab_home;
      document.getElementById('trans-zh-tab-pricing').value = config.translations['zh-CN'].tab_pricing;
      document.getElementById('trans-en-badge').value = config.translations['en'].badge;
      document.getElementById('trans-en-cta-demo').value = config.translations['en'].cta_demo;
      document.getElementById('trans-en-tab-home').value = config.translations['en'].tab_home;
      document.getElementById('trans-en-tab-pricing').value = config.translations['en'].tab_pricing;

      // ä¸»é¢˜è®¾ç½®
      document.getElementById('theme-primary').value = config.theme.primary;
      document.getElementById('theme-primary-strong').value = config.theme.primaryStrong;
      document.getElementById('theme-bg').value = config.theme.bg;
      document.getElementById('theme-card').value = config.theme.card;
      document.getElementById('theme-text').value = config.theme.text;
      document.getElementById('theme-sub').value = config.theme.sub;
    }

    // ä¿å­˜é…ç½®åˆ°æœåŠ¡å™¨
    async function saveConfig() {
      const config = {
        home: {
          tagline: document.getElementById('hero-tagline').value,
          title: document.getElementById('hero-title').value,
          desc: document.getElementById('hero-desc').value,
          chips: [
            document.getElementById('chip-1').value,
            document.getElementById('chip-2').value,
            document.getElementById('chip-3').value,
            document.getElementById('chip-4').value,
            document.getElementById('chip-5').value
          ]
        },
        video: {
          url: document.getElementById('video-url').value,
          poster: document.getElementById('video-poster').value,
          autoplay: document.getElementById('video-autoplay').checked,
          muted: document.getElementById('video-muted').checked,
          loop: document.getElementById('video-loop').checked
        },
        downloads: {
          parent: {
            apk: document.getElementById('parent-apk-url').value,
            changelog: document.getElementById('parent-changelog-url').value,
            qr: document.getElementById('parent-qr-url').value
          },
          child: {
            apk: document.getElementById('child-apk-url').value,
            guide: document.getElementById('child-guide-url').value,
            qr: document.getElementById('child-qr-url').value
          }
        },
        pricing: {
          basic: document.getElementById('pricing-basic').value,
          standard: document.getElementById('pricing-standard').value,
          premium: document.getElementById('pricing-premium').value,
          device1: document.getElementById('device-1').value,
          device3: document.getElementById('device-3').value,
          device5: document.getElementById('device-5').value
        },
        agreements: {
          user: {
            title: document.getElementById('agreement-user-title').value,
            content: document.getElementById('agreement-user-content').value
          },
          privacy: {
            title: document.getElementById('agreement-privacy-title').value,
            content: document.getElementById('agreement-privacy-content').value
          }
        },
        translations: {
          'zh-CN': {
            badge: document.getElementById('trans-zh-badge').value,
            cta_demo: document.getElementById('trans-zh-cta-demo').value,
            tab_home: document.getElementById('trans-zh-tab-home').value,
            tab_pricing: document.getElementById('trans-zh-tab-pricing').value
          },
          'en': {
            badge: document.getElementById('trans-en-badge').value,
            cta_demo: document.getElementById('trans-en-cta-demo').value,
            tab_home: document.getElementById('trans-en-tab-home').value,
            tab_pricing: document.getElementById('trans-en-tab-pricing').value
          }
        },
        theme: {
          primary: document.getElementById('theme-primary').value,
          primaryStrong: document.getElementById('theme-primary-strong').value,
          bg: document.getElementById('theme-bg').value,
          card: document.getElementById('theme-card').value,
          text: document.getElementById('theme-text').value,
          sub: document.getElementById('theme-sub').value
        }
      };

      // åŒæ—¶ä¿å­˜åˆ° localStorage ä½œä¸ºå¤‡ä»½
      localStorage.setItem(STORAGE_KEY, JSON.stringify(config));
      
      // ä¿å­˜åˆ°æœåŠ¡å™¨
      try {
        const response = await fetch(`${API_BASE}/config`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${authToken}`
          },
          body: JSON.stringify(config)
        });
        
        const result = await response.json();
        
        if (result.code === 200) {
          return { success: true, config, backupPath: result.data?.backupPath };
        } else {
          throw new Error(result.message || 'ä¿å­˜å¤±è´¥');
        }
      } catch (error) {
        console.error('ä¿å­˜åˆ°æœåŠ¡å™¨å¤±è´¥:', error);
        // å³ä½¿æœåŠ¡å™¨ä¿å­˜å¤±è´¥ï¼Œä¹Ÿè¿”å›é…ç½®ï¼ˆå·²ä¿å­˜åˆ° localStorageï¼‰
        return { success: false, config, error: error.message };
      }
    }

    // å„é¡µé¢çš„ä¿å­˜å‡½æ•°
    async function saveHomeContent() {
      const result = await saveConfig();
      if (result.success) {
        showAlert('home-alert', 'ä¸»é¡µå†…å®¹å·²ä¿å­˜åˆ°æœåŠ¡å™¨', 'success');
      } else {
        showAlert('home-alert', 'ä¿å­˜å¤±è´¥: ' + result.error, 'error');
      }
    }

    async function saveVideoSettings() {
      const result = await saveConfig();
      if (result.success) {
        showAlert('video-alert', 'è§†é¢‘è®¾ç½®å·²ä¿å­˜åˆ°æœåŠ¡å™¨', 'success');
      } else {
        showAlert('video-alert', 'ä¿å­˜å¤±è´¥: ' + result.error, 'error');
      }
    }

    async function saveDownloads() {
      const result = await saveConfig();
      if (result.success) {
        showAlert('downloads-alert', 'ä¸‹è½½é“¾æ¥å·²ä¿å­˜åˆ°æœåŠ¡å™¨', 'success');
      } else {
        showAlert('downloads-alert', 'ä¿å­˜å¤±è´¥: ' + result.error, 'error');
      }
    }

    async function savePricing() {
      const result = await saveConfig();
      if (result.success) {
        showAlert('pricing-alert', 'å®šä»·ä¿¡æ¯å·²ä¿å­˜åˆ°æœåŠ¡å™¨', 'success');
      } else {
        showAlert('pricing-alert', 'ä¿å­˜å¤±è´¥: ' + result.error, 'error');
      }
    }

    async function saveAgreements() {
      const result = await saveConfig();
      if (result.success) {
        showAlert('agreements-alert', 'åè®®å†…å®¹å·²ä¿å­˜åˆ°æœåŠ¡å™¨', 'success');
      } else {
        showAlert('agreements-alert', 'ä¿å­˜å¤±è´¥: ' + result.error, 'error');
      }
    }

    async function saveTranslations() {
      const result = await saveConfig();
      if (result.success) {
        showAlert('translations-alert', 'ç¿»è¯‘å†…å®¹å·²ä¿å­˜åˆ°æœåŠ¡å™¨', 'success');
      } else {
        showAlert('translations-alert', 'ä¿å­˜å¤±è´¥: ' + result.error, 'error');
      }
    }

    async function saveTheme() {
      const result = await saveConfig();
      if (result.success) {
        showAlert('theme-alert', 'ä¸»é¢˜è®¾ç½®å·²ä¿å­˜åˆ°æœåŠ¡å™¨', 'success');
      } else {
        showAlert('theme-alert', 'ä¿å­˜å¤±è´¥: ' + result.error, 'error');
      }
    }

    // å„é¡µé¢çš„åŠ è½½å‡½æ•°
    async function loadHomeContent() {
      await loadConfig();
      showAlert('home-alert', 'å·²ä»æœåŠ¡å™¨åŠ è½½æœ€æ–°é…ç½®', 'success');
    }

    async function loadVideoSettings() {
      await loadConfig();
      showAlert('video-alert', 'å·²ä»æœåŠ¡å™¨åŠ è½½æœ€æ–°é…ç½®', 'success');
    }

    async function loadDownloads() {
      await loadConfig();
      showAlert('downloads-alert', 'å·²ä»æœåŠ¡å™¨åŠ è½½æœ€æ–°é…ç½®', 'success');
    }

    async function loadPricing() {
      await loadConfig();
      showAlert('pricing-alert', 'å·²ä»æœåŠ¡å™¨åŠ è½½æœ€æ–°é…ç½®', 'success');
    }

    async function loadAgreements() {
      await loadConfig();
      showAlert('agreements-alert', 'å·²ä»æœåŠ¡å™¨åŠ è½½æœ€æ–°é…ç½®', 'success');
    }

    async function loadTranslations() {
      await loadConfig();
      showAlert('translations-alert', 'å·²ä»æœåŠ¡å™¨åŠ è½½æœ€æ–°é…ç½®', 'success');
    }

    async function loadTheme() {
      await loadConfig();
      showAlert('theme-alert', 'å·²ä»æœåŠ¡å™¨åŠ è½½æœ€æ–°é…ç½®', 'success');
    }

    // æ˜¾ç¤ºæç¤ºä¿¡æ¯
    function showAlert(containerId, message, type) {
      const container = document.getElementById(containerId);
      container.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
      setTimeout(() => {
        container.innerHTML = '';
      }, 3000);
    }

    // é¢„è§ˆä¸»é¡µ
    function previewPage() {
      window.open('./index.html', '_blank');
    }

    // å¯¼å‡ºé…ç½®ä¸º JSON
    async function exportConfig() {
      const result = await saveConfig();
      const config = result.config || result;
      const dataStr = JSON.stringify(config, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'landing-page-config.json';
      link.click();
      URL.revokeObjectURL(url);
    }

    // å¯¼å…¥é…ç½®
    function importConfig() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'application/json';
      input.onchange = async (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = async (event) => {
            try {
              const config = JSON.parse(event.target.result);
              localStorage.setItem(STORAGE_KEY, JSON.stringify(config));
              await loadConfig();
              alert('é…ç½®å¯¼å…¥æˆåŠŸï¼');
            } catch (error) {
              alert('é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼š' + error.message);
            }
          };
          reader.readAsText(file);
        }
      };
      input.click();
    }

    // é¡µé¢å¯¼èˆª
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const page = link.getAttribute('data-page');
        
        // æ›´æ–°å¯¼èˆªçŠ¶æ€
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        
        // æ˜¾ç¤ºå¯¹åº”é¡µé¢
        document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
        const targetPage = document.getElementById(`${page}-page`);
        if (targetPage) {
          targetPage.classList.add('active');
        }
      });
    });

    // è¯­è¨€æ ‡ç­¾åˆ‡æ¢
    document.querySelectorAll('.lang-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        const lang = tab.getAttribute('data-lang');
        
        document.querySelectorAll('.lang-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        document.querySelectorAll('.lang-content').forEach(c => c.classList.remove('active'));
        document.getElementById(`${lang}-content`).classList.add('active');
      });
    });

    // åˆå§‹åŒ–
    (async () => {
      await loadConfig();
    })();
  </script>
</body>
</html>

